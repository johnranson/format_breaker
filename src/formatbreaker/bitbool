"""Boolean and bitwise formats"""

from formatbreaker import Byte, FBException


class Flag(Byte):
    """Reads 1 byte as a boolean"""

    def _decode(self, data):
        return bool(data[0])


class LFlag(Byte):
    """Reads 1 byte as a boolean with only one non-zero value allowed"""

    def __init__(self, value=None, name=None, address=None, copy_source=None) -> None:
        self.value = 1
        if copy_source:
            self.value = copy_source.value
        if value:
            self.length_key = value
        super().__init__(name, address, copy_source)

    def _decode(self, data):
        if not data[0]:
            return False
        if data[0] == self.value:
            return True
        raise FBException
